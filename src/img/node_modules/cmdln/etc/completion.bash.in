#!/usr/bin/env bash
#
# Bash completion generated for {{name}}
# {{date}}
#

_{{name}}_default_words() {
	# main command
	local words=(
{{args}}
	)
	echo "${words[*]}"
}

_{{name}}_words() {
	local cmd=$1
	local curword=${COMP_WORDS[COMP_CWORD]}
	if [[ $cmd == "$curword" ]]; then
		COMPREPLY=($(compgen -W "$(_{{name}}_default_words)" -- "$curword"))
		return
	fi

	case "$cmd" in
{{commands}}
	*) words=($(_{{name}}_default_words)) ;;
	esac

	COMPREPLY=($(compgen -W "${words[*]}" -- "$curword"))
}

_{{name}}() {
	local i word
	for ((i = 1; i <= COMP_CWORD; i++)); do
		word=${COMP_WORDS[i]}
		if ((i < COMP_CWORD)) && [[ ${word:0:1} == '-' ]]; then
			continue
		fi
		_{{name}}_words "$word"
		break
	done

}

complete -o default -F _{{name}} {{name}}
